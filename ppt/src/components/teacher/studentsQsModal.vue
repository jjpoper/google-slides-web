<template>
  <div>
    <div class="mark-area">
      <div
        v-for="(item, index) in list"
        :key="index.toString()"
        class="markitem"
        :style="`top:${item.data.top}px;left:${item.data.left}px`"
      >
        <svg
          t="1623305613286"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="2165"
          width="32"
          height="32"
        >
          <path
            d="M837.818182 190.836364c-83.781818-88.436364-200.145455-139.636364-325.818182-139.636364-121.018182-4.654545-237.381818 41.890909-330.472727 134.981818-139.636364 144.290909-176.872727 353.745455-93.090909 525.963637l-18.618182 148.945454c0 13.963636 0 41.890909 18.618182 60.509091 18.618182 23.272727 41.890909 32.581818 69.818181 27.927273l144.29091-18.618182c55.854545 27.927273 125.672727 46.545455 200.145454 46.545454h13.963636c111.709091 0 223.418182-46.545455 311.854546-130.327272 88.436364-83.781818 139.636364-200.145455 139.636364-330.472728 9.309091-121.018182-41.890909-242.036364-130.327273-325.818181z m-325.818182 707.490909c-60.509091 0-125.672727-13.963636-176.872727-41.890909-9.309091-4.654545-13.963636-4.654545-18.618182-4.654546l-158.254546 23.272727 18.618182-158.254545c0-9.309091 0-18.618182-4.654545-23.272727-79.127273-144.290909-51.2-325.818182 69.818182-446.836364 74.472727-74.472727 172.218182-111.709091 274.618181-111.709091s200.145455 41.890909 274.618182 111.709091c74.472727 74.472727 111.709091 172.218182 111.709091 274.618182s-41.890909 200.145455-111.709091 274.618182c-79.127273 60.509091-176.872727 102.4-279.272727 102.4z"
            p-id="2166"
            fill="#d81e06"
          ></path>
          <path
            d="M530.618182 707.490909c-18.618182-4.654545-32.581818-9.309091-46.545455 4.654546-13.963636 13.963636-13.963636 27.927273-9.309091 41.890909 0 4.654545 9.309091 9.309091 13.963637 13.963636l4.654545 4.654545 4.654546 4.654546c4.654545 0 13.963636 4.654545 18.618181 4.654545 9.309091 0 18.618182-4.654545 23.272728-9.309091 13.963636-13.963636 13.963636-32.581818 4.654545-41.890909l-13.963636-23.272727zM512 256c-134.981818 0-172.218182 102.4-172.218182 158.254545 0 18.618182 18.618182 37.236364 37.236364 37.236364s37.236364-18.618182 37.236363-37.236364c0-4.654545 0-83.781818 97.745455-83.781818 13.963636 0 60.509091 4.654545 79.127273 37.236364 18.618182 18.618182 18.618182 51.2 9.309091 69.818182-13.963636 13.963636-32.581818 32.581818-51.2 46.545454 0 0-4.654545 4.654545-9.309091 4.654546-4.654545 4.654545-9.309091 4.654545-9.309091 9.309091-37.236364 32.581818-60.509091 83.781818-60.509091 134.981818 0 9.309091 4.654545 18.618182 13.963636 27.927273 4.654545 4.654545 13.963636 13.963636 23.272728 13.963636 13.963636 0 18.618182-4.654545 23.272727-13.963636 4.654545-4.654545 9.309091-13.963636 9.309091-23.272728 0-27.927273 13.963636-60.509091 32.581818-79.127272 0 0 4.654545-4.654545 9.309091-4.654546 4.654545-4.654545 9.309091-4.654545 9.309091-9.309091l9.309091-9.309091c18.618182-13.963636 46.545455-32.581818 55.854545-60.509091 32.581818-51.2 23.272727-116.363636-13.963636-158.254545-23.272727-41.890909-69.818182-60.509091-130.327273-60.509091z"
            p-id="2167"
            fill="#d81e06"
          ></path>
        </svg>
      </div>
      <div class="cl" v-if="list.length > 0" @click="showDrawer">
        <svg
          t="1623325974057"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="2852"
          width="64"
          height="64"
        >
          <path
            d="M605.824 513.536l335.68 338.304c24.704 24.96 24.704 65.28 0 90.176-24.704 24.896-64.768 24.896-89.472 0L471.616 558.656l0 0c0 0 0 0 0 0-18.496-18.688-23.168-46.08-13.888-69.056 3.072-7.68 7.744-14.912 13.952-21.12l380.352-383.424c24.704-24.96 64.768-24.96 89.472 0 24.704 24.96 24.704 65.28 0 90.24L605.824 513.536zM219.072 511.296l340.736 338.944c25.088 24.96 25.088 65.408 0 90.368-12.544 12.48-28.992 18.752-45.44 18.752-16.448 0-32.896-6.208-45.44-18.752L82.88 556.48l0 0c0 0 0 0 0 0C64 537.728 59.264 510.336 68.736 487.232c3.136-7.68 7.872-14.912 14.144-21.12l386.112-384.128c12.544-12.48 28.992-18.752 45.44-18.752 16.448 0 32.896 6.208 45.376 18.688 25.088 25.024 25.088 65.408 0 90.368L219.072 511.296z"
            p-id="2853"
            fill="#d81e06"
          ></path>
        </svg>
      </div>
    </div>
    <el-drawer
      title="comment list"
      :visible.sync="drawer"
      show-close
      direction="rtl"
    >
      <div class="studentComment" :style="`height: ${webHeight}px;`">
        <div>
          <div v-for="(item, index) in list" :key="index.toString()">
            <div class="rightcomment">
              <div class="section">
                <p>{{ item.user_name }}</p>
                <p>{{ getTimeStr(item.data.time) }}</p>
                <!-- <p>{{item.value}}</p> -->
                <video
                  v-if="item.data.type === 'video'"
                  controlslist="nodownload"
                  controls=""
                  :src="item.data.link"
                  width="100%"
                />
                <audio
                  v-else-if="item.data.type === 'audio'"
                  controlslist="nodownload"
                  controls=""
                  :src="item.data.link"
                  width="100%"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </el-drawer>
  </div>
</template>
<style scoped>
.mark-area {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 50px;
  background-color: transparent;
}
.markitem {
  width: 30px;
  height: 30px;
  /* border-radius: 15px;
  background-color: red; */
  position: absolute;
  z-index: 999;
}
.item {
  width: 50px;
  cursor: pointer;
}
.rightcomment {
  width: 100%;
  min-height: 30px;
  background-color: #fff;
  border: 1px solid #999;
  box-sizing: border-box;
  padding: 10px;
  word-wrap: break-word;
  line-height: 20px;
}
.section {
  margin-bottom: 10px;
}
.cl {
  position: absolute;
  top: 50%;
  width: 64px;
  height: 64px;
  right: 0;
  margin-top: -32px;
  cursor: pointer;
}
.studentComment{
  overflow-y: scroll;
}
</style>
<script>
export default {
  props: {
    sendQuestion: {
      type: Function,
    },
    list: {
      type: Array,
      default: [],
    },
  },
  data() {
    return {
      webHeight: window.winHeight - 50,
      drawer: false,
    };
  },
  mounted() {
    console.log(this.list);
  },
  methods: {
    showDrawer() {
      this.drawer = true;
    },
    getTimeStr(time) {
      var now = new Date();
      now.setTime(time * 1000);
      var year = now.getFullYear();
      var month = now.getMonth() + 1;
      var date = now.getDate();
      var hour = now.getHours();
      var minute = now.getMinutes();
      var second = now.getSeconds();
      if (hour < 10) {
        hour = "0" + hour;
      }
      if (minute < 10) {
        minute = "0" + minute;
      }
      if (second < 10) {
        second = "0" + second;
      }
      return (
        year +
        "-" +
        month +
        "-" +
        date +
        " " +
        hour +
        ":" +
        minute +
        ":" +
        second
      );
    },
  },
};
</script>